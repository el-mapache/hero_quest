Crafty.c('LevelOne', {
  subclasses: {
    "106*": {
      sprite: 'Mummy',
      overrides: {
        attributes: {
          name: 'Fellmarg',
          flavor: 'even in undeath, he remains a mighty warrior'
        },
        stats: {
          attack: 4
        }
      }
    },

    "111*": {
      sprite: 'Gargoyle',
      overrides: {
        attributes: {
          name: 'Verag',
          flavor: 'a fearsome gargoyle, one of Zargon\'s lieutenants'
        }
      }
    }
  },

  init: function() {
    this.quest = 1;
    this.name = 'Fellmarg\'s Tomb',
    this.description = "You have learned well, my friends, and the time of your first trial is now at hand. You must enter the royal catacombs which contain Fellmarg's tomb. Therein, seek out the foul gargoyle named Verag. He has been sent by Zargon to corrupt and raise the remains of Fellmarg for his own nefarious purposes. Return to me when the task is completed, and you shall be richly rewarded."
    this.wanderingMonster = 'Goblin';
    this.notes = [
      "As this quest is meant as an introduction, it contains neither secret doors nor traps."
    ];

    this.scriptedEvents = {
      "Treasure": {
        3: {
          run: false,
          name: 'Nothing',
          type: 'treasure',
          description: 'All of the weapons on the weapons rack are chipped and rusted. There is nothing here for the heros to take.',
          effect: function(unit) {
            return;
          }
        },

        4: {
          run: false,
          name: 'Nothing',
          type: 'treasure',
          description: 'The treasure chest in this room is empty.',
          effect: function(unit) {
            // run treasure chest opening animation
            return;
          }
        },

        9: {
          run: false,
          name: 'Gold Coins',
          type: 'treasure',
          description: 'Within the chest your heros discover 84 gold coins.',
          effect: function(unit) {
            return Crafty(unit.ownerPointer).gold += 84;
          }
        },

        11: {
          run: false,
          name: 'Gold Coins',
          type: 'treasure',
          description: 'Within the chest your heros discover 120 gold coins.',
          effect: function(unit) {
            return Crafty(unit.ownerPointer).gold += 120;
          }
        }
      }
    };

    this.layers = {
      1: [
        ['002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002'],

        ['002','001','001','001','001','001','001','001','001','001','001','001','001','001','001','001','001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ["002", "007", "004", "004", '004', '004', '004', '004', '004', '004', '004', '004', '004', '004', '004', '004', '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '000', "000", "000", "000", "000", '000', "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', '004', '004', "000", '004', '004', '004', '004', '004', '004', '004', "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', '004', '004', '004', '004', '003', '003', '004', '004', '004', '004', '004', '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', '004', "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', '004', "000", '004', '004', '004', '004', '004', '004', '004', '004', "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', '004', "000", '004', "000", "000", "000", "000", "000", "000", '004', "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', '004', '004', '000', '004', '004', '004', '004', '000', '004', '004', '004', "000", '004', "000", "000", "000", "000", "000", "000", '004', "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", '004', "000", "000", "000", "000", "000", "000", '000', "000", '003', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', '004', '004', '004', '004', '004', '004', '004', '004', '004', '004', '004', "000", '004', "000", "000", "000", "000", "000", "000", '004', "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', '001', '001', '004', '001', '001', '004', "000", '004', "000", "000", "000", "000", "000", "000", '004', "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", "000", "000", "000", "000", "000", '004', '001', '001', '004', '001', '001', '004', "000", '004', '004', '004', '004', '004', '004', '004', '004', "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', '001', '001', '004', '001', '001', '004', "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', '004', '004', '004', '004', '004', '004', '004', '000', '004', "000", "000", '004', '004', '004', '004', '004', '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', '004', '004', '004', '004', '004', "000", "000", "000", "000", '004', "000", "000", "000", '004', "000", "000", '004', "000", "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "020", 0, "000", "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", '004', "000", "000", '004', "000", "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', 0, 0, "000", "000", '004', "000", "000", "000", "000", '000', "000", "000", "000", '004', "000", "000", '000', "000", "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", '004', "000", "000", '004', "000", "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", "000", '004', "000", "000", "000", '004', "000", "000", '004', "000", "000", "000", "000", '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002', "000", '004', '004', '004', "000", '004', '004', '004', '004', "000", '004', '004', '004', '004', '004', '004', "000", "000", '004', '004', '004', '004', '004', '004', '001', '001', '001', '001', '001', '001', '001', '001', '001', '001', '002'],

        ['002',"000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", "000", '003','001','001','001','001','001','001','001','001','001','001','001','001','001','001','001','002'],

        ['002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002','002']
      ],
      2: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,'105',0,0,0,'104','028',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,'104','104',0,"008",0,'106*',0,0,"008",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,'105',0,0,0,'104',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,'008',0,0,0,0,0,0,0,'106',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,'029',0,0,'108',0,0,'021',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,'107',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,'107','107',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'023','024',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,'008',0,0,0,0,'008',0,0,0,0,0,'022',0,'111*',0,'108',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'021',0,0,0,0,'008',0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,'027',0,0,0,0,0,0,0,0,0,0,0,'108',0,0,'109',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,'008',0,'107',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,'108',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'008',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,'025','025','025',0,0,0,0,0,0,0,0,0,0,'026',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,"100","102",0,0,0,'108',0,0,0,'107',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,"101","103",0,0,0,0,'108','008',0,0,0,0,0,0,'008',0,0,'109',0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,"110",0,0,0,0,0,0,0,'110',0,0,0,0,0,0,'109',0,'023',0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,"030",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,'008',0,0,0,0,'008',0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
      ],
      3: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,7,7,7,7,0,8,8,8,8,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,7,7,7,7,0,8,8,8,8,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,7,7,7,7,0,8,8,8,8,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,6,6,6,6,0,10,10,10,10,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,6,6,6,6,0,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,6,6,6,6,0,10,10,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,6,6,6,6,0,10,10,10,10,0,11,11,11,11,11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,6,6,6,6,0,10,10,10,10,0,11,11,11,11,11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,11,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,2,2,2,2,0,3,3,3,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,1,1,1,1,0,2,2,2,2,0,3,3,3,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,1,1,1,1,0,2,2,2,2,0,3,3,3,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,1,1,1,1,0,2,2,2,2,0,3,3,3,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,1,1,1,1,0,2,2,2,2,0,3,3,3,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
      ]
    }
  },

  // Subclass a unit.  Useful to create named enemy units.  The subclassed unit must
  // inherit from one of the existing monster or hero types.
  subclass: function(id, position) {
    // Get the correct subclass from
    var subclass = this.subclasses[id];

    var unit = Crafty.e('Actor')
                     .requires(subclass.sprite)
                     .at(position.x, position.y, true);

    unit.extendEntity(subclass.overrides);

    return unit;
  }
});
